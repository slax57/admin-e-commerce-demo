var me=Object.defineProperty,ge=Object.defineProperties;var pe=Object.getOwnPropertyDescriptors;var A=Object.getOwnPropertySymbols;var G=Object.prototype.hasOwnProperty,Q=Object.prototype.propertyIsEnumerable;var H=(t,r,a)=>r in t?me(t,r,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[r]=a,v=(t,r)=>{for(var a in r||(r={}))G.call(r,a)&&H(t,a,r[a]);if(A)for(var a of A(r))Q.call(r,a)&&H(t,a,r[a]);return t},K=(t,r)=>ge(t,pe(r));var X=(t,r)=>{var a={};for(var s in t)G.call(t,s)&&r.indexOf(s)<0&&(a[s]=t[s]);if(t!=null&&A)for(var s of A(t))r.indexOf(s)<0&&Q.call(t,s)&&(a[s]=t[s]);return a};import{x as y,j as e,X as h,h as ne,m as fe,a as n,G as c,F as S,T as g,u as Z,_ as U,l as _,E as ae,N as be,S as T,z as p,b as x,H as ve,O as xe,t as j,W as se,c as ye,d as _e,e as we,f as D,g as f,A as N,i as ie,k as I,n as Ce,y as ke,o as J,p as P,q as Se,r as oe,s as V,B as d,v as $e,w as E,C as le,D as ce,I as Pe,J as Te,K as Ae,L as b,M as z,P as De,Q as Y,R as Fe,U as W,V as Oe,Y as Re,Z as q,$ as m,a0 as Be,a1 as L,a2 as Ie,a3 as Le,a4 as Ee,a5 as Me,a6 as F,a7 as Ne,a8 as u,a9 as M,aa as O,ab as ze,ac as We,ad as Ue,ae as ee,af as je,ag as C,ah as qe,ai as He,aj as Ge,ak as R,al as te,am as re,an as Qe,ao as Ke,ap as Xe,aq as Ze,ar as $,as as Je,at as Ve}from"./vendor.508eda31.js";const Ye=function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const i of l.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&s(i)}).observe(document,{childList:!0,subtree:!0});function a(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerpolicy&&(l.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?l.credentials="include":o.crossorigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(o){if(o.ep)return;o.ep=!0;const l=a(o);fetch(o.href,l)}};Ye();const et=t=>{const r=y();return r?e(h,{options:t.options,record:{data:t.render(r)},source:"data"}):null},tt=()=>{const t=y();return n("span",{children:["Order ",t?t.reference:""]})},rt=()=>n(S,{children:[e(g,{variant:"h6",children:"Order"}),n(c,{container:!0,spacing:2,alignItems:"center",children:[e(c,{item:!0,xs:6,children:e(Z,{label:"Date",children:e(U,{source:"date"})})}),e(c,{item:!0,xs:6,children:e(Z,{label:"Reference",children:e(_,{source:"reference"})})}),e(c,{item:!0,xs:6,children:e(ae,{source:"status",choices:[{id:"delivered",name:"delivered"},{id:"ordered",name:"ordered"},{id:"cancelled",name:"cancelled"}]})}),e(c,{item:!0,xs:6,children:e(be,{label:"Returned",source:"returned"})})]})]}),nt=()=>n(S,{children:[e(g,{variant:"h6",children:"Customer"}),n(T,{children:[e(p,{source:"customer_id",reference:"customers",children:e(x,{render:t=>`${t.first_name} ${t.last_name}`})}),e(p,{source:"customer_id",reference:"customers",children:e(ve,{source:"email"})})]})]}),at=()=>n(S,{children:[e(g,{variant:"h6",children:"Shipping Address"}),e(p,{source:"customer_id",reference:"customers",link:!1,children:n(T,{children:[e(x,{render:t=>`${t.first_name} ${t.last_name}`}),e(_,{source:"address"}),e(x,{render:t=>[t.city,t.zipcode].join(", ")})]})})]}),st=()=>{const t=y();return t?e(p,{source:"product_id",reference:"products",link:!1,children:e(et,{render:r=>r.price*t.quantity,options:{style:"currency",currency:"USD"}})}):null},it=()=>n(S,{children:[e(g,{variant:"h6",children:"Items"}),e(xe,{source:"basket",children:n(j,{bulkActionButtons:!1,sx:{"& .RaDatagrid-headerCell":{fontWeight:"bold"},width:"100%"},size:"medium",children:[e(p,{source:"product_id",reference:"products",label:"Reference",children:e(_,{source:"reference"})}),e(p,{source:"product_id",reference:"products",label:"Unit Price",link:!1,children:e(h,{source:"price",options:{style:"currency",currency:"USD"}})}),e(h,{label:"Quantity",source:"quantity"}),e(se,{label:"Total",textAlign:"right",children:e(st,{})})]})})]}),ot=()=>n(S,{children:[e(g,{variant:"h6",children:"Totals"}),e(ye,{children:e(_e,{children:n(we,{children:[n(D,{children:[e(f,{component:"th",scope:"row",children:"Sum"}),e(f,{align:"right",children:e(h,{source:"total_ex_taxes",options:{style:"currency",currency:"USD"}})})]},"total_ex_taxes"),n(D,{children:[e(f,{component:"th",scope:"row",children:"Delivery"}),e(f,{align:"right",children:e(h,{source:"delivery_fees",options:{style:"currency",currency:"USD"}})})]},"delivery_fees"),n(D,{children:[e(f,{component:"th",scope:"row",children:e(x,{render:t=>`Tax (${t.tax_rate*100} %)`})}),e(f,{align:"right",children:e(h,{source:"taxes",options:{style:"currency",currency:"USD"}})})]},"taxes"),n(D,{children:[e(f,{sx:{fontWeight:"bold"},children:"Total"}),e(f,{align:"right",sx:{fontWeight:"bold"},children:e(h,{source:"total",options:{style:"currency",currency:"USD"},sx:{fontWeight:"bold"}})})]},"total")]})})})]}),lt=()=>e(ne,{resource:"commands",title:e(tt,{}),children:e(fe,{children:n(c,{container:!0,spacing:2,children:[e(c,{item:!0,xs:8,children:e(rt,{})}),n(c,{item:!0,container:!0,xs:4,spacing:2,direction:"column",children:[e(c,{item:!0,children:e(nt,{})}),e(c,{item:!0,children:e(at,{})})]}),e(c,{item:!0,xs:12,children:e(it,{})}),e(c,{item:!0,xs:12,children:e(ot,{})})]})})});function de(t){const r=y(t);return r?n(T,{direction:"row",spacing:2,children:[e(N,{alt:`${r.first_name} ${r.last_name}`,src:r.avatar,sx:{width:25,height:25}}),n(g,{variant:"body2",children:[r.first_name," ",r.last_name]})]}):null}const ct=[e(I,{source:"q",label:"Search",alwaysOn:!0,resettable:!0}),e(Ce,{source:"customer_id",label:"Customer",reference:"customers",children:e(ke,{optionText:t=>`${t.first_name} ${t.last_name}`})}),e(J,{label:"Passed Since",source:"date_gte"}),e(J,{label:"Passed Before",source:"date_lte"}),e(P,{label:"Min amount",source:"total_gte"}),e(Se,{label:"Returned",source:"returned"})],dt=()=>{const{filterValues:t,setFilters:r,displayedFilters:a}=oe(),s=V.exports.useCallback((l,i)=>{const w=K(v({},t),{status:i});r(w,a)},[t,r,a]),o=V.exports.useCallback(()=>(t==null?void 0:t.status)||"ordered",[t]);return n(S,{children:[e(d,{sx:{borderBottom:1,borderColor:"divider"},children:n($e,{value:o(),onChange:s,variant:"fullWidth",children:[e(E,{label:"Ordered",value:"ordered"}),e(E,{label:"Delivered",value:"delivered"}),e(E,{label:"Cancelled",value:"cancelled"})]})}),n(j,{rowClick:"edit",children:[e(U,{source:"date",showTime:!0}),e(_,{source:"reference"}),e(p,{source:"customer_id",reference:"customers",children:e(de,{})}),e(p,{source:"customer_id",reference:"customers",link:!1,label:"Address",children:e(x,{render:l=>[l.address,l.city,l.zipcode].join(", ")})}),e(x,{label:"Nb items",render:l=>{var i;return`${(i=l.basket)==null?void 0:i.length}`},textAlign:"right"}),e(h,{source:"total",options:{style:"currency",currency:"USD"}})]})]})},ut=()=>e(ie,{title:"Orders",filters:ct,children:e(dt,{})});var ht={list:ut,edit:lt,options:{label:"Orders"},icon:le};function mt(t){return!t||!t.length?t:t[0].toUpperCase()+t.slice(1)}const gt=()=>e(ce,{rowsPerPageOptions:[12,24,48]}),pt=()=>n(Pe,{children:[e(Te,{fields:["reference","sales","stock"]}),e(Ae,{})]}),ft=()=>n(q,{label:"Sales",icon:e(le,{}),children:[e(m,{label:"Best sellers",value:{sales_gt:25,sales_lte:void 0,sales:void 0}}),e(m,{label:"Average",value:{sales_gt:10,sales_lte:25,sales:void 0}}),e(m,{label:"Low",value:{sales_gt:0,sales_lte:10,sales:void 0}}),e(m,{label:"Never sold",value:{sales_gt:void 0,sales_lte:void 0,sales:0}})]}),bt=()=>n(q,{label:"Stock",icon:e(Be,{}),children:[e(m,{label:"Out of stock",value:{stock_gt:void 0,stock_lt:void 0,stock:0}}),e(m,{label:"1 - 9 items",value:{stock_gt:0,stock_lt:10,stock:void 0}}),e(m,{label:"10 - 49 items",value:{stock_gt:10,stock_lt:50,stock:void 0}}),e(m,{label:"50 items & more",value:{stock_gt:50,stock_lt:void 0,stock:void 0}})]}),vt=()=>{const{data:t}=L("categories");return t?e(q,{label:"Categories",icon:e(Ie,{}),children:t.sort((r,a)=>r.name.localeCompare(a.name)).map(r=>e(m,{label:mt(r.name),value:{category_id:r.id}},r.id))}):null},xt=()=>e(b,{sx:{order:-1,width:250,minWidth:250,mr:2,mt:"64px",mb:"52px"},children:n(z,{children:[e(De,{source:"q"}),e(ft,{}),e(bt,{}),e(vt,{})]})}),yt=()=>{const{data:t}=oe(),r=Y(s=>s.breakpoints.down("md")),a=Y(s=>s.breakpoints.down("lg"));return t?e(Fe,{sx:{transform:"translateZ(0)",margin:0},rowHeight:180,gap:1,cols:r?3:a?4:6,children:t.map(s=>e(W,{to:`/products/${s.id}`,children:n(Oe,{children:[e("img",{src:s.thumbnail,alt:s.reference,loading:"lazy",style:{width:"100%",height:"100%",objectFit:"cover"}}),e(Re,{sx:{background:"linear-gradient(to top, rgba(0,0,0,0.9) 0%, rgba(0,0,0,0.4) 70%, rgba(0,0,0,0) 100%)"},title:s.reference,subtitle:n(se,{children:[e(x,{record:s,render:o=>`${o.width}x${o.height}, `}),e(h,{record:s,source:"price",options:{style:"currency",currency:"USD"}})]}),position:"bottom"})]})},s.id))}):null},_t=()=>e(ie,{title:"Posters",pagination:e(gt,{}),actions:e(pt,{}),aside:e(xt,{}),children:e(yt,{})}),ue=t=>{const r=y(t),l=t,{label:a,sortBy:s}=l,o=X(l,["label","sortBy"]);return!r||!r.rating?null:e(Le,v({value:r.rating,icon:e(Ee,{}),sx:{color:"text.secondary"},readOnly:!0},o))},wt=t=>e(d,{component:"div",sx:{overflow:"hidden",maxWidth:"20em",whiteSpace:"nowrap",textOverflow:"ellipsis"},children:e(_,v({},t))}),Ct=()=>{const t=y();return n("span",{children:["Poster #",t?t.reference:""]})},kt=()=>{const t=y(),{data:r}=L("categories");return n(Me,{children:[n(F,{label:"image",children:[e(b,{sx:{mb:2},children:e(Ne,{component:"img",height:"240",image:t.image,alt:t.reference})}),e(I,{source:"image",validate:u(),sx:{width:"40em"}}),e(I,{source:"thumbnail",validate:u(),sx:{width:"40em"}})]}),n(F,{label:"details",path:"details",children:[e(I,{source:"reference",validate:u(),sx:{width:"15em"}}),e(P,{source:"price",InputProps:{startAdornment:e(M,{position:"start",children:"$"})},validate:[u(),O()],sx:{width:"7em"}}),n(T,{direction:"row",children:[e(P,{source:"width",InputProps:{endAdornment:e(M,{position:"start",children:"cm"})},validate:[u(),O()],sx:{mr:2,width:"7em"}}),e(P,{source:"height",InputProps:{endAdornment:e(M,{position:"start",children:"cm"})},validate:[u(),O()],sx:{width:"7em"}})]}),e(ae,{label:"category",source:"category_id",choices:r,validate:u(),sx:{width:"15em"}}),e(P,{source:"stock",validate:[u(),O()],sx:{width:"7em"}})]}),e(F,{label:"description",path:"description",children:e(d,{sx:{maxWidth:"640px"},children:e(ze,{source:"description",validate:u(),label:!1})})}),e(F,{label:"reviews",path:"reviews",children:e(We,{perPage:10,reference:"reviews",target:"product_id",pagination:e(ce,{sx:{alignSelf:"end",color:"text.secondary"}}),children:n(j,{empty:e(c,{container:!0,justifyContent:"center",children:e(c,{item:!0,children:e(g,{children:"No review yet on this poster"})})}),bulkActionButtons:!1,sx:{"& .RaDatagrid-headerCell":{fontWeight:"bold"},width:"100%"},children:[e(U,{source:"date"}),e(p,{source:"customer_id",reference:"customers",children:e(de,{})}),e(ue,{label:"Rating",sortBy:"rating"}),e(wt,{source:"comment"}),e(_,{source:"status"})]})})})]})},St=()=>e(ne,{resource:"products",title:e(Ct,{}),children:e(kt,{})});var $t={list:_t,edit:St,options:{label:"Posters"},icon:Ue};const B=t=>n(c,{container:!0,columns:2,spacing:2,justifyContent:"space-between",alignItems:"center",padding:2,children:[e(c,{item:!0,children:t.icon}),e(c,{item:!0,children:n(T,{children:[e(g,{variant:"subtitle1",color:"text.secondary",textAlign:"right",children:t.title}),e(g,{variant:"h5",textAlign:"right",children:t.content})]})})]}),Pt=t=>e(d,{component:"div",sx:{overflow:"hidden",display:"-webkit-box","-webkit-line-clamp":"2","-webkit-box-orient":"vertical"},children:e(_,v({},t))}),k={minWidth:"230px"},Tt=function(t){const r=new Date;return r.setMonth(r.getMonth()-t),r},At=Tt(1),Dt=function(t){let r=0;return t&&(r=t.map(a=>a.total).reduce((a,s)=>a+s,0)),r},Ft=()=>{var o,l;const t=L("reviews",{filter:{status:"pending"},pagination:{page:1,perPage:25}}),r=ee("customers",{ids:t.data&&t.data.length?t.data.map(i=>i.customer_id):[]}),a=L("commands",{filter:{date_gte:At.toISOString()}}),s=ee("customers",{ids:a.data&&a.data.length?a.data.map(i=>i.customer_id):[]});return a.data&&a.data.filter(i=>i.status==="ordered"),e(je,{sx:{padding:2},children:n(d,{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:2,children:[e(d,{gridColumn:"span 1",children:e(b,{component:C,sx:k,children:e(B,{icon:e(qe,{fontSize:"large",color:"secondary"}),title:"Monthly Revenue",content:`${Dt(a.data).toLocaleString()} $US`})})}),e(d,{gridColumn:"span 1",children:e(b,{component:C,sx:k,children:e(B,{icon:e(He,{fontSize:"large",color:"secondary"}),title:"New Orders",content:String(a.data?a.data.length:0)})})}),e(d,{gridColumn:"span 1",gridRow:"span 3",children:n(b,{component:C,sx:k,children:[e(B,{icon:e(Ge,{fontSize:"large",color:"secondary"}),title:"Pending Reviews",content:String(((o=t.data)==null?void 0:o.length)||0)}),e(R,{}),e(te,{data:t.data,resource:"reviews",primaryText:i=>e(ue,{record:i,label:"Rating",sortBy:"rating"}),secondaryText:i=>e(Pt,{record:i,source:"comment"}),leftAvatar:i=>{if(!r.data)return null;const w=r.data.find(he=>he.id===i.customer_id);return w?e(N,{alt:`${w.first_name} ${w.last_name}`,src:w.avatar}):null}}),e(R,{}),e(re,{component:W,to:"/reviews",fullWidth:!0,sx:{pt:1,pb:1},children:"See All Reviews"})]})}),e(d,{gridColumn:"span 1",gridRow:"span 3",children:n(b,{component:C,sx:k,children:[e(B,{icon:e(Qe,{fontSize:"large",color:"secondary"}),title:"New Customers",content:String(((l=s.data)==null?void 0:l.length)||0)}),e(R,{}),e(te,{data:s.data,resource:"customers",primaryText:i=>`${i.first_name} ${i.last_name}`,leftAvatar:i=>e(N,{alt:`${i.first_name} ${i.last_name}`,src:i.avatar})}),e(R,{}),e(re,{component:W,to:"/customers",fullWidth:!0,sx:{pt:1,pb:1},children:"See All Customers"})]})}),e(d,{gridColumn:"span 2",children:e(b,{component:C,sx:k,children:e(z,{children:"30 Day Revenue History"})})}),e(d,{gridColumn:"span 2",children:e(b,{component:C,sx:k,children:e(z,{children:"Pending Orders"})})})]})})},Ot=Ke(Xe({serializeDate:!0}),!0);function Rt(){return n(Ze,{dataProvider:Ot,dashboard:Ft,children:[e($,v({name:"products"},$t)),e($,v({name:"commands"},ht)),e($,{name:"categories"}),e($,{name:"reviews"}),e($,{name:"customers"})]})}Je.render(e(Ve.StrictMode,{children:e(Rt,{})}),document.getElementById("root"));
